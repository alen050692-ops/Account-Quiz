<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GTM-Kunden-Quiz (Interaktiv)</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 40px auto; padding: 20px; background-color: #f4f7f6; }
        h1 { color: #004c99; text-align: center; }
        .quiz-container { background-color: #ffffff; padding: 30px; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
        .question-card { margin-bottom: 25px; padding: 15px; border: 1px solid #ddd; border-radius: 6px; }
        .question-card h3 { margin-top: 0; color: #333; }
        .options label { display: block; margin: 8px 0; cursor: pointer; padding: 10px; border-radius: 4px; transition: background-color 0.2s; border: 1px solid #ccc; }
        .options label:hover { background-color: #e6f0ff; }
        button { padding: 10px 20px; background-color: #007bff; color: white; border: none; border-radius: 6px; font-size: 16px; cursor: pointer; margin-top: 15px; transition: background-color 0.3s; }
        button:hover { background-color: #0056b3; }
        #feedback { margin-top: 15px; padding: 15px; border-radius: 4px; display: none; }
        .correct-feedback { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .incorrect-feedback { background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .final-results { text-align: center; font-size: 1.2em; padding: 20px; border-top: 2px solid #004c99; }
        .hidden { display: none; }
        /* Styles f√ºr visuelle Hervorhebung */
        .highlight-correct { border: 2px solid #155724 !important; background-color: #d4edda !important; }
        .highlight-incorrect { border: 2px solid #721c24 !important; background-color: #f8d7da !important; }

        /* NEU: Startbildschirm-Styles */
        #start-screen { text-align: center; padding: 40px; }
        #start-screen button { width: 50%; font-size: 1.2em; }
        
    </style>
</head>
<body>

    <h1>üöÄ GTM-Kundenwissen-Challenge</h1>
    <div class="quiz-container">
        
        <div id="start-screen">
            <h2>Bereit f√ºr die Challenge?</h2>
            <p>Klicken Sie auf Start, um das Quiz zu beginnen und den Sound zu aktivieren.</p>
            <button onclick="startQuiz()">Quiz starten</button>
        </div>
        
        <audio id="jingle" src="jingle.mp3" preload="auto"></audio>
        
        <div id="quiz-area" class="hidden">
            </div>

        <div id="feedback" class="hidden"></div>
        
        <button id="checkButton" class="hidden" onclick="checkAnswer()">Antwort pr√ºfen</button>
        <button id="nextButton" class="hidden" onclick="nextQuestion()">N√§chste Frage</button>

        <div id="results" class="hidden final-results"></div>
    </div>

    <script>
        const allQuestions = [
            // --- HIER IHR FRAGEN-ARRAY EINF√úGEN ---
            { question: "Wie viel Prozent des Bayer-Umsatzes sollen bis 2030 digitale und datenbasierte Produkte ausmachen?", options: ["35 %", "50 %", "65 %"], answer: "50 %", context: "Bayer setzt stark auf Digitalisierung im Agrarsektor." },
            // ... (Alle Ihre Fragen hier)
            { question: "Welches Ziel verfolgt die RTL Group bei der Nutzung von KI in der personalisierten Videowerbung bis 2026?", options: ["Personalisierung bei 50 % der Werbepl√§tze", "Personalisierung bei 80 % der Werbepl√§tze", "KI wird nur in Pilotprojekten genutzt"], answer: "Personalisierung bei 80 % der Werbepl√§tze", context: "Fokus auf die Steigerung der Targeting-Genauigkeit in der Werbung." }
        ];

        // Funktion zum Mischen des Arrays (Fisher-Yates Algorithmus)
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }
        
        shuffleArray(allQuestions);
        const questions = allQuestions; 

        let currentQuestionIndex = 0;
        let score = 0;

        const quizArea = document.getElementById('quiz-area');
        const feedbackDiv = document.getElementById('feedback');
        const checkButton = document.getElementById('checkButton');
        const nextButton = document.getElementById('nextButton');
        const resultsDiv = document.getElementById('results');
        const jingleAudio = document.getElementById('jingle');
        const startScreen = document.getElementById('start-screen');

        // NEUE FUNKTION: Startet das Quiz und umgeht die Autoplay-Blockade
        function startQuiz() {
            startScreen.classList.add('hidden');
            quizArea.classList.remove('hidden');
            checkButton.classList.remove('hidden');
            loadQuestion();
        }

        // Funktion zum Laden der aktuellen Frage (mit Jingle-Abspielen)
        function loadQuestion() {
            if (currentQuestionIndex >= questions.length) {
                showResults();
                return;
            }
            
            // Jingle abspielen (funktioniert jetzt, da startQuiz geklickt wurde)
            jingleAudio.currentTime = 0; 
            jingleAudio.play().catch(error => {
                console.warn("Jingle-Wiedergabe konnte nicht automatisch gestartet werden. Benutzerinteraktion erforderlich.");
            });

            const q = questions[currentQuestionIndex];
            quizArea.innerHTML = `
                <div class="question-card">
                    <h3>Frage ${currentQuestionIndex + 1} von ${questions.length}:</h3>
                    <p>${q.question}</p>
                    <div class="options">
                        ${q.options.map((option, i) => `
                            <label id="option-${i}">
                                <input type="radio" name="current_question" value="${option}"> ${option}
                            </label>
                        `).join('')}
                    </div>
                </div>
            `;
            
            // UI-Elemente zur√ºcksetzen
            feedbackDiv.classList.add('hidden');
            feedbackDiv.classList.remove('correct-feedback', 'incorrect-feedback');
            checkButton.classList.remove('hidden');
            nextButton.classList.add('hidden');
        }

        // Funktion zur √úberpr√ºfung der Antwort (unver√§ndert)
        function checkAnswer() {
            const q = questions[currentQuestionIndex];
            const selectedOptionInput = document.querySelector('input[name="current_question"]:checked');

            if (!selectedOptionInput) {
                alert("Bitte w√§hlen Sie eine Antwort aus.");
                return;
            }
            // ... (Restliche Logik wie zuvor)
            const selectedAnswer = selectedOptionInput.value;
            const isCorrect = selectedAnswer === q.answer;
            
            // Finden der korrekten Options-Box zur visuellen Hervorhebung
            const correctOptionLabel = Array.from(document.querySelectorAll('.options label'))
                                         .find(label => label.textContent.trim().includes(q.answer)); 
            
            // Feedback anzeigen
            feedbackDiv.classList.remove('hidden');
            checkButton.classList.add('hidden');
            nextButton.classList.remove('hidden');
            
            // 1. Visuelle Hervorhebung der korrekten Antwort
            if(correctOptionLabel) {
                 correctOptionLabel.classList.add('highlight-correct');
            }

            // 2. Textuelles Feedback anzeigen
            if (isCorrect) {
                score++;
                feedbackDiv.classList.add('correct-feedback');
                feedbackDiv.innerHTML = '<strong>RICHTIG!</strong> Das ist korrekt.';
            } else {
                feedbackDiv.classList.add('incorrect-feedback');
                feedbackDiv.innerHTML = `<strong>FALSCH!</strong> Die korrekte Antwort war: <strong>${q.answer}</strong>.`;
                // Visuelle Hervorhebung der FALSCHEN Antwort des Benutzers
                selectedOptionInput.closest('label').classList.add('highlight-incorrect');
            }

            // Kontext (Faktencheck) hinzuf√ºgen
            feedbackDiv.innerHTML += `<p style="margin-top: 10px;"><em>Faktencheck: ${q.context}</em></p>`;

            // Alle Radio-Buttons nach der Pr√ºfung deaktivieren
            document.querySelectorAll('input[name="current_question"]').forEach(input => input.disabled = true);
        }

        // Funktion zum Laden der n√§chsten Frage (unver√§ndert)
        function nextQuestion() {
            currentQuestionIndex++;
            loadQuestion();
        }

        // Funktion zur Anzeige der Endergebnisse (unver√§ndert)
        function showResults() {
            // ... (Logik zur Anzeige der Ergebnisse)
            quizArea.innerHTML = '';
            feedbackDiv.classList.add('hidden');
            checkButton.classList.add('hidden');
            nextButton.classList.add('hidden');
            
            const totalQuestions = questions.length;
            const percentage = (score / totalQuestions) * 100;

            resultsDiv.classList.remove('hidden');
            resultsDiv.innerHTML = `
                <h2>Quiz beendet! üéâ</h2>
                <p>Sie haben **${score} von ${totalQuestions}** Fragen richtig beantwortet.</p>
                <p>Ihre Erfolgsquote: **${percentage.toFixed(0)}%**</p>
                <p style="margin-top: 20px;">Vielen Dank f√ºr Ihre Teilnahme an der GTM-Kundenwissen-Challenge!</p>
            `;
        }

        // Beim Laden der Seite wird nur der Fragen-Array gemischt, aber das Quiz startet nicht.
        // Die Funktion startQuiz() wird beim Klick auf den Button aufgerufen.
    </script>
</body>
</html>
